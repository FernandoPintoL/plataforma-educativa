# ============================================
# CONFIGURACI√ìN ESPEC√çFICA PARA RAILWAY
# ============================================
# Este archivo sobrescribe configuraciones en producci√≥n

# APP_URL: URL p√∫blica de tu aplicaci√≥n Laravel
# Railway asigna autom√°ticamente el dominio
APP_URL=https://plataforma-educativa-production-8078.up.railway.app

# Configuraci√≥n de sesiones optimizada
SESSION_DRIVER=file
SESSION_ENCRYPT=false

# Deshabilitar debug en producci√≥n
APP_DEBUG=false

# Configuraci√≥n de PHP para Railway
PHP_MEMORY_LIMIT=256M
PHP_MAX_EXECUTION_TIME=60

# Configuraci√≥n de FastCGI (si es aplicable)
FASTCGI_BUFFER_SIZE=128k
FASTCGI_BUFFERS=256 16k
FASTCGI_BUSY_BUFFERS_SIZE=256k
FASTCGI_TEMP_FILE_WRITE_SIZE=256k

# Headers de respuesta optimizados
EXPOSE_PHP=false

# ============================================
# CONFIGURACI√ìN ML PARA RAILWAY
# ============================================

# Modo de ejecuci√≥n: Usar HTTP para llamar servicio separado
ML_EXECUTION_MODE=http

# URL del servicio ML en Railway
# IMPORTANTE: Railway asigna puertos autom√°ticamente mediante variable $PORT
# La URL p√∫blica NO incluye puerto (ej: https://web-production-42085.up.railway.app)
# NO USAR PUERTO EN LA URL - Railway maneja internamente
ML_SERVICE_URL=https://web-production-42085.up.railway.app

# Timeout para llamadas HTTP (segundos)
ML_HTTP_TIMEOUT=300

# Timeout para scripts locales (no usado en modo http)
ML_SUBPROCESS_TIMEOUT=0

# Configuraci√≥n de reintentos
ML_RETRIES=3
ML_RETRY_DELAY=1000

# ============================================
# NOTA IMPORTANTE: PUERTOS EN RAILWAY
# ============================================
#
# Railway asigna DIN√ÅMICAMENTE los puertos mediante la variable $PORT
#
# ‚úÖ LO QUE EST√Å BIEN:
# - Procfile: web: php -S 0.0.0.0:${PORT:-8080} -t public
# - Dockerfile: CMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "${PORT:-8000}"]
#
# ‚ùå LO QUE NO HACER:
# - NO hardcodear puerto 8080 o 8000 en Procfile
# - NO poner :8080 o :8000 en las URLs internas
#
# üîß C√ìMO FUNCIONA:
# 1. Railway asigna un puerto aleatorio (ej: 8080)
# 2. Lo inyecta en variable de entorno PORT
# 3. Tu app usa: --port ${PORT:-8080}
# 4. Si PORT no est√°, usa valor default (8080)
# 5. URL p√∫blica: https://tudominio.up.railway.app (sin puerto)
#
# üåê COMUNICACI√ìN ENTRE SERVICIOS EN RAILWAY:
# - Railway proporciona DNS interno para servicios
# - Laravel ‚Üí ML se hace por HTTPS p√∫blica: https://web-production-42085.up.railway.app
# - NO usar localhost:8000 ni 0.0.0.0
#
# üìå RESUMEN:
# Tu configuraci√≥n est√° CORRECTA. Railway maneja todo autom√°ticamente.